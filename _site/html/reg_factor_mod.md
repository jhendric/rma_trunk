[]{#TOP}

MODULE reg\_factor
==================

+-----------------------------------+-----------------------------------+
| ![DART project                    | Jump to [DART Documentation Main  |
| logo](../../../documentation/imag | Index](../../../documentation/ind |
| es/Dartboard7.png){height="70"}   | ex.html)\                         |
|                                   | version information for this      |
|                                   | file:\                            |
|                                   | \$Id\$                            |
+-----------------------------------+-----------------------------------+

[INTERFACES](#Interface) / [NAMELIST](#Namelist) / [FILES](#FilesUsed) /
[REFERENCES](#References) / [ERRORS](#Errors) / [PLANS](#FuturePlans) /
[PRIVATE COMPONENTS](#PrivateComponents) / [TERMS OF USE](#Legalese)

Overview
--------

Computes a weighting factor to reduce the impact of observations on
state variables using information from groups of ensembles. Can be run
using groups or using archived summary information available from
previous group filter experiments.

[]{#OtherModulesUsed}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

OTHER MODULES USED
------------------

    types_mod
    utilities_mod
    time_manager_mod

[]{#Interface}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

PUBLIC INTERFACES
-----------------

  -------------------------------- ---------------------------------------
  *use reg\_factor\_mod, only :*   [comp\_reg\_factor](#comp_reg_factor)
  -------------------------------- ---------------------------------------

A note about documentation style. Optional arguments are enclosed in
brackets *\[like this\]*.

[]{#comp_reg_factor}\

<div class="routine">

*var = comp\_reg\_factor(num\_groups, regress, obs\_index, state\_index
*\[, obs\_state\_ind\] \[, obs\_state\_max\]*)*
    real(r8)                                    ::  comp_reg_factor 
    integer,                         intent(in) ::  num_groups 
    real(r8), dimension(num_groups), intent(in) ::  regress 
    integer,                         intent(in) ::  obs_index 
    integer,                         intent(in) ::  state_index 
    integer, optional,               intent(in) ::  obs_state_ind 
    integer, optional,               intent(in) ::  obs_state_max 

</div>

<div class="indent1">

Returns a weighting factor given regression factors from each group of a
group filter or retrieves a factor generated by previous group filter
runs from a file.

  ---------------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------
  *num\_groups   *       Number of groups. Set to 1 when using information from previously run group filter from file.
  *regress   *           Regression factor from each group for a given state variable and observation variable pair.
  *obs\_index   *        Integer index of the observation being processed. Not used in current implementation .
  *state\_index   *      Integer index of state variable being processed. Not used in current implementation.
  *obs\_state\_ind   *   Index into file generated for Bgrid model which could be duplicated in other large models.
  *obs\_state\_max   *   Maximum number of observation state variable pairs with non-zero impacts for a given model and observation sequence. Used for generating Bgrid statistic files.
  ---------------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------

</div>

\
[]{#Namelist}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

NAMELIST
--------

This namelist is read from the file *input.nml*. Namelists start with an
ampersand '&' and terminate with a slash '/'. Character strings that
contain a '/' must be enclosed in quotes to prevent them from
prematurely terminating the namelist.

<div class="namelist">

    &reg_factor_nml
       select_regression    = 1,
       input_reg_file       = "time_mean_reg",
       save_reg_diagnostics = .false.,
       reg_diagnostics_file = "reg_diagnostics"  
    /

</div>

\
\

<div>

+-----------------------+-----------------------+-----------------------+
| Item                  | Type                  | Description           |
+=======================+=======================+=======================+
| select\_regression    | integer               | Selects the method    |
|                       |                       | for computing         |
|                       |                       | regression factor.    |
|                       |                       | -   1 = compute using |
|                       |                       |     sampling theory   |
|                       |                       |     for any ensemble  |
|                       |                       |     size.             |
|                       |                       | -   2 = low order     |
|                       |                       |     model format.     |
|                       |                       |     Works from        |
|                       |                       |     archived time     |
|                       |                       |     mean or time      |
|                       |                       |     median regression |
|                       |                       |     files generated   |
|                       |                       |     by low-order      |
|                       |                       |     models like       |
|                       |                       |     Lorenz-96.        |
|                       |                       | -   3 = selects bgrid |
|                       |                       |     archived file.    |
|                       |                       |     This is not       |
|                       |                       |     currently         |
|                       |                       |     supported in      |
|                       |                       |     released          |
|                       |                       |     versions.         |
+-----------------------+-----------------------+-----------------------+
| input\_reg\_file      | character(len=129)    | File name from which  |
|                       |                       | statistics are to be  |
|                       |                       | read for              |
|                       |                       | select\_regression =  |
|                       |                       | 3.                    |
+-----------------------+-----------------------+-----------------------+
| save\_reg\_diagnostic | logical* *            | True if regression    |
| s                     |                       | diagnostics should be |
|                       |                       | computed.             |
+-----------------------+-----------------------+-----------------------+
| reg\_diagnostics\_fil | character(len=129)* * | File name to which to |
| e                     |                       | write diagnostics.    |
+-----------------------+-----------------------+-----------------------+

</div>

\
\
[]{#FilesUsed}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

FILES
-----

-   (optional) input regression file from namelist variable
    input\_reg\_file.
-   reg\_factor\_mod.nml in input.nml

  filename                                             purpose
  ---------------------------------------------------- ---------------------------------
  from *input.nml*&reg\_factor\_mod:input\_reg\_file   file of regression coefficients

[]{#References}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

REFERENCES
----------

-   none

[]{#Errors}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

ERROR CODES and CONDITIONS
--------------------------

<div class="errors">

Routine
Message
Comment
comp\_reg\_factor
Illegal value for namelist parameter select\_regression
Value must be 1(sampling theory), 2 (table lookup) or 3 (read from
obs\_state\_reg\_file).

</div>

KNOWN BUGS
----------

none at this time

[]{#FuturePlans}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

FUTURE PLANS
------------

none at this time

[]{#PrivateComponents}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

PRIVATE COMPONENTS
------------------

N/A

[]{#Legalese}

<div class="top">

\[[top](#)\]

</div>

------------------------------------------------------------------------

Terms of Use
------------

DART software - Copyright UCAR. This open source software is provided by
UCAR, "as is", without charge, subject to all terms of use at
<http://www.image.ucar.edu/DAReS/DART/DART_download>

  ------------------ -----------------------------
  Contact:           DART core group
  Revision:          \$Revision\$
  Source:            \$URL\$
  Change Date:       \$Date\$
  Change history:    try "svn log" or "svn diff"
  ------------------ -----------------------------


